# 文件管理器预览 v1.0.1 更新日志

## 版本信息
- **版本号**: 1.0.1
- **发布日期**: 2024年12月26日
- **基于版本**: 1.0.0

## 🎉 新增功能

### 1. 缩略图开关控制
- **位置**: 导航栏按钮组 `[◀] [▶] [▲] [|||] [◎]`
- **功能**: 可控制是否显示文件缩略图
- **图标**: 
  - 开启: ◎ (实心圆)
  - 关闭: ○ (空心圆)
- **优势**: 解决大量文件时的性能问题

### 2. 智能面包屑导航
- **路径压缩**: 超过5级目录自动压缩显示
- **显示策略**: `/ > ... > 最后3级目录`
- **交互优化**: 点击 `...` 可切换到完整路径模式

### 3. 地址栏切换功能
- **按钮**: `|||` 切换按钮
- **模式**: 面包屑导航 ⇄ 完整路径编辑
- **快捷操作**: 支持直接输入路径导航

### 4. 真实内容预览
- **图片文件**: 显示实际图片内容
- **PDF文件**: 渲染第一页真实内容（需Qt PDF支持）
- **文本文件**: 显示真实文本内容（支持代码文件）
- **统一样式**: 所有文件使用专业的纸张背景设计

## 🔧 功能改进

### 1. 文件列表排序修复
- **问题**: 切换路径后排序功能失效
- **解决**: 在所有路径切换函数中重新应用排序设置
- **影响**: `navigateToPath()`, `goBack()`, `goForward()`, `refreshCurrentPath()`

### 2. 右键菜单优化
- **文字对齐**: "行高" → "行　　高", "关于" → "关　　于"
- **视觉统一**: 与四字菜单项保持一致的宽度
- **布局改进**: 更专业的菜单外观

### 3. 缩略图系统重构
- **文档样式**: 统一的白色纸张背景设计
- **视觉效果**: 阴影、边框、折叠效果
- **类型支持**: 
  - 图片: 真实内容预览
  - PDF: 文档内容模拟/真实渲染
  - 办公文档: 类型化图标设计
  - 文本: 真实内容显示

## ⚡ 性能优化

### 1. 可选缩略图生成
- **默认状态**: 开启
- **用户控制**: 可随时开关
- **性能提升**: 关闭后避免大量文件的卡顿问题

### 2. 智能缓存机制
- **缩略图缓存**: 避免重复生成
- **内存管理**: 合理的缓存策略
- **即时切换**: 开关状态立即生效

### 3. 文件大小限制
- **文本文件**: 限制1MB以内
- **PDF渲染**: 合适的缩放比例
- **安全处理**: 大文件自动跳过

## 🎨 界面改进

### 1. 导航栏布局优化
- **按钮顺序**: `[◀] [▶] [▲] [|||] [◎] [面包屑区域]`
- **视觉一致**: 统一的按钮风格
- **功能分组**: 导航控制 + 路径显示

### 2. 缩略图视觉设计
- **纸张效果**: 白色背景 + 阴影 + 折叠角
- **内容预览**: 在纸张内显示真实内容
- **类型标识**: 底部显示文件类型

### 3. 菜单样式统一
- **文字对齐**: 通过空格实现视觉平衡
- **悬停效果**: 统一的交互反馈
- **分组清晰**: 合理的分隔线使用

## 🐛 问题修复

1. **排序功能**: 修复路径切换后排序失效
2. **图标显示**: 解决emoji图标兼容性问题
3. **内存泄漏**: 改进图标提供器的内存管理
4. **API兼容**: 修复Qt6 API变更导致的编译问题

## 📋 技术细节

### 新增类和方法
- `ThumbnailIconProvider`: 支持开关控制的图标提供器
- `toggleThumbnailMode()`: 缩略图开关控制
- `applySortingSettings()`: 排序设置应用
- `updateBreadcrumb()`: 智能面包屑更新

### 代码优化
- 模块化的缩略图生成逻辑
- 改进的错误处理机制
- 更好的用户反馈系统

## 🔄 升级说明

从 v1.0.0 升级到 v1.0.1：
1. 所有原有功能完全保留
2. 新增功能默认开启
3. 无需额外配置
4. 向后兼容

## 📦 构建信息

- **编译器**: GCC/Clang (C++17)
- **Qt版本**: Qt6 (兼容Qt5)
- **CMake**: 3.16+
- **平台**: Linux (Debian/Ubuntu)

---

**开发者**: 克亮 <315707022@qq.com>  
**项目主页**: https://github.com/tonglingcn/file-manager-preview  
**许可证**: GPL-3.0